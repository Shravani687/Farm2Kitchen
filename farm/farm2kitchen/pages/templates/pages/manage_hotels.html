<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Hotels | Farm2Kitchen</title>
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <style>
        /* --- PREMIUM THEME VARIABLES --- */
        :root { 
            --primary-green: #2ecc71; 
            --dark-green: #27ae60;
            --sidebar-width: 260px;
            --sidebar-gradient: linear-gradient(135deg, #0f3d4a 0%, #206a5d 100%);
            --bg-light: #eaeff1;
            --card-radius: 20px;
            --btn-radius: 50px;
        }

        body { 
            background-color: var(--bg-light); 
            font-family: 'Segoe UI', Roboto, sans-serif;
            color: #444;
            overflow-x: hidden;
        }

        /* --- 1. SIDEBAR: FLOATING TAB LOOK --- */
        .sidebar {
            height: 100vh; width: var(--sidebar-width); 
            position: fixed; top: 0; left: 0; 
            background: var(--sidebar-gradient); 
            color: white;
            box-shadow: 10px 0 30px rgba(0,0,0,0.1);
            z-index: 1000;
            padding-top: 20px;
        }
        
        .brand-logo { 
            text-align: center; 
            padding: 30px 20px 50px 20px; 
            border-bottom: 1px solid rgba(255,255,255,0.05);
            margin-bottom: 20px;
        }
        
        .logo-icon { 
            font-size: 45px; color: #fff; margin-bottom: 10px; 
            text-shadow: 0 4px 15px rgba(0,0,0,0.3); 
            background: rgba(255,255,255,0.1);
            width: 80px; height: 80px; line-height: 80px;
            border-radius: 50%;
            margin: 0 auto 15px auto;
            backdrop-filter: blur(5px);
        }

        .sidebar a {
            padding: 16px 30px; 
            display: flex; align-items: center;
            color: rgba(255,255,255,0.7); 
            text-decoration: none; 
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); 
            margin: 8px 20px; 
            border-radius: var(--btn-radius); 
            font-size: 0.95rem;
            font-weight: 500;
            border: 1px solid transparent;
        }

        .sidebar a:hover { 
            background: rgba(255, 255, 255, 0.1); 
            color: white; 
            padding-left: 35px;
        }

        .sidebar a.active { 
            background: #ffffff; 
            color: #0f3d4a; 
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transform: scale(1.02);
        }
        
        .sidebar a i { width: 25px; text-align: center; margin-right: 10px; font-size: 1.1rem; }


        /* --- 2. MAIN CONTENT & TABLE --- */
        .main-content { margin-left: var(--sidebar-width); padding: 40px; }
        
        .table-container { 
            background: white; 
            padding: 0; 
            border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.02);
        }

        .table thead th {
            border-top: none;
            border-bottom: 2px solid #f0f0f0;
            background-color: #f8f9fa;
            color: #6c757d;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
            padding: 15px 25px;
        }

        .table tbody td {
            vertical-align: middle;
            padding: 20px 25px;
            color: #444;
            border-top: 1px solid #f4f4f4;
            font-size: 0.95rem;
        }

        .table-hover tbody tr { transition: background-color 0.2s, transform 0.2s; }
        .table-hover tbody tr:hover {
            background-color: #fcfcfc;
            transform: scale(1.005);
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
            z-index: 10;
            position: relative;
        }


        /* --- 3. PREMIUM BUTTONS --- */
        
        /* The "ADD HOTEL" Button (Gradient Red/Orange) */
        .btn-add-hotel {
            background: linear-gradient(45deg, #FF512F, #DD2476); /* Distinct from Farmers */
            color: white !important;
            border: none;
            padding: 10px 25px;
            border-radius: var(--btn-radius);
            box-shadow: 0 4px 15px rgba(221, 36, 118, 0.4);
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }

        .btn-add-hotel:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(221, 36, 118, 0.6);
            text-decoration: none;
        }

        /* The "DELETE" Button (Soft Red Pill) */
        .btn-delete {
            background: #fff;
            color: #e74c3c;
            border: 1px solid #fab1a0;
            padding: 6px 18px;
            border-radius: var(--btn-radius);
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-delete:hover {
            background: #e74c3c;
            color: white;
            border-color: #e74c3c;
            box-shadow: 0 4px 10px rgba(231, 76, 60, 0.4);
            text-decoration: none;
        }

        /* BADGES */
        .badge-pill { padding: 8px 12px; font-weight: 600; }
        .badge-success { background-color: rgba(46, 204, 113, 0.15); color: #27ae60; }
        .badge-warning { background-color: rgba(241, 196, 15, 0.15); color: #f39c12; }

    </style>
</head>
<body>

    <div class="sidebar">
        <div class="brand-logo">
            <div class="logo-icon"><i class="fas fa-leaf"></i></div>
            <h4 style="font-weight: 700; letter-spacing: 1px;">Farm2Kitchen</h4>
        </div>
        
        <a href="{% url 'admin_dashboard' %}" class="{% if request.resolver_match.url_name == 'admin_dashboard' %}active{% endif %}">
            <i class="fas fa-tachometer-alt"></i> Dashboard
        </a>
        
        <a href="{% url 'manage_farmers' %}" class="{% if request.resolver_match.url_name == 'manage_farmers' %}active{% endif %}">
            <i class="fas fa-tractor"></i> Farmers
        </a>
        
        <a href="{% url 'manage_hotels' %}" class="{% if request.resolver_match.url_name == 'manage_hotels' %}active{% endif %}">
            <i class="fas fa-hotel"></i> Hotels
        </a>
        
        <a href="{% url 'manage_products' %}" class="{% if request.resolver_match.url_name == 'manage_products' %}active{% endif %}">
            <i class="fas fa-box"></i> Products
        </a>
    </div>

    <div class="main-content">
        
        <div class="d-flex justify-content-between align-items-center mb-5">
            <div>
                <h3 style="font-weight: 800; color: #1a202c; margin:0;">Manage Hotels</h3>
                <p class="text-muted m-0">View and manage all registered hotels</p>
            </div>
            
            <a href="{% url 'add_hotel' %}" class="btn btn-add-hotel">
                <i class="fas fa-plus mr-2"></i> Add New Hotel
            </a>
        </div>

        <div class="table-container">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>Hotel Name</th>
                        <th>Phone & Email</th>
                        <th>Address</th>
                        <th>Status</th>
                        <th class="text-right">Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for hotel in hotels %}
                    <tr>
                        <td>
                            <div class="d-flex align-items-center">
                                <div style="width: 40px; height: 40px; background: #ffebee; color: #c62828; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 15px;">
                                    <i class="fas fa-building"></i>
                                </div>
                                <div>
                                    <strong style="color: #2d3436; font-size: 1rem;">{{ hotel.user.first_name }}</strong><br>
                                    <small class="text-muted">Manager: {{ hotel.user.last_name }}</small>
                                </div>
                            </div>
                        </td>
                        <td>
                            <span style="font-weight: 500;">{{ hotel.phone }}</span><br>
                            <small class="text-muted">{{ hotel.user.email }}</small>
                        </td>
                        <td style="max-width: 250px;">
                            <span class="text-secondary">{{ hotel.address|truncatechars:35 }}</span>
                        </td>
                        <td>
                            {% if hotel.is_approved %}
                                <span class="badge badge-pill badge-success">Active</span>
                            {% else %}
                                <span class="badge badge-pill badge-warning">Pending</span>
                            {% endif %}
                        </td>
                        <td class="text-right">
                            <a href="{% url 'delete_user' %}" 
                               class="btn btn-delete" 
                               onclick="return confirm('Delete this Hotel account?');">
                                <i class="fas fa-trash-alt mr-1"></i> Delete
                            </a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="5" class="text-center py-5 text-muted">No hotels found in the database.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>